<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>‡πÇ‡∏Ñ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏ó‡∏£‡∏≤‡∏¢‡πÅ‡∏°‡∏ß‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞ EM</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    body {
      margin: 0;
      font-family: "Segoe UI", Tahoma, sans-serif;
      background: linear-gradient(135deg, #f1f1f1, #d9d9d9);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .container {
      background: white;
      width: 95%;
      max-width: 720px;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      padding: 24px;
      text-align: center;
      animation: fadeIn 0.6s ease;
      position: relative;
    }

    .school-logo {
      position: absolute;
      top: 12px;
      left: 12px;
      width: 70px;
      background: white;
      padding: 6px;
      border-radius: 12px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
    }

    h1 {
      margin-top: 20px;
      margin-bottom: 10px;
      color: #333;
    }

    h2 {
      color: #444;
    }

    p {
      color: #555;
      line-height: 1.6;
    }

    label {
      display: block;
      margin-top: 12px;
      font-weight: bold;
      color: #444;
      text-align: left;
    }

    input {
      margin-top: 6px;
      padding: 10px;
      width: 100%;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 16px;
    }

    .btn {
      display: block;
      width: 100%;
      margin: 12px 0;
      padding: 14px;
      font-size: 17px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: 0.25s;
      background: #333;
      color: white;
    }

    .btn:hover {
      background: #000;
      transform: scale(1.02);
    }

    .back {
      background: #888;
    }

    .deploy {
      background: #0d6efd;
    }

    .hidden {
      display: none;
    }

    .result {
      margin-top: 15px;
      background: #f5f5f5;
      padding: 15px;
      border-radius: 12px;
      color: #333;
      text-align: left;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
    }

    th, td {
      border-bottom: 1px solid #ccc;
      padding: 8px;
      text-align: left;
    }

    img.hero {
      width: 100%;
      border-radius: 15px;
      margin-top: 10px;
    }

    @media (max-width: 480px) {
      h1 { font-size: 20px; }
      .btn { font-size: 15px; padding: 12px; }
      .school-logo { width: 55px; }
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(15px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <div class="container">
    <img src="logo.png" class="school-logo" onclick="goHome()" title="‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å" />

    <!-- ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å -->
    <div id="home">
      <h1>‡πÇ‡∏Ñ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏ó‡∏£‡∏≤‡∏¢‡πÅ‡∏°‡∏ß‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞ EM</h1>
      <p>‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô + ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥ + ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÑ‡∏î‡πâ</p>

      <img class="hero" src="cat.jpg" alt="cat">

      <button class="btn" onclick="showPage('mix')">1. ‡∏ó‡∏£‡∏≤‡∏¢‡πÅ‡∏°‡∏ß‡∏ú‡∏™‡∏° EM</button>
      <button class="btn" onclick="showPage('separate')">2. ‡∏ó‡∏£‡∏≤‡∏¢‡πÅ‡∏°‡∏ß‡πÅ‡∏¢‡∏Å‡∏´‡∏±‡∏ß‡πÄ‡∏ä‡∏∑‡πâ‡∏≠ EM</button>
      <button class="btn" onclick="showPage('historyPage')">3. ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ó‡∏£‡∏≤‡∏¢</button>
      <button class="btn" onclick="showPage('advicePage')">4. ‡∏Ç‡πâ‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</button>
      <button class="btn" onclick="showPage('emPage')">5. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á EM</button>

      <button class="btn deploy" onclick="openDeploy()">üåê Deploy ‡∏Ç‡∏∂‡πâ‡∏ô GitHub Pages</button>
    </div>

    <!-- ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ 1 -->
    <div id="mix" class="hidden">
      <h1>‡∏ó‡∏£‡∏≤‡∏¢‡πÅ‡∏°‡∏ß‡∏ú‡∏™‡∏° EM</h1>
      <p>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ó‡∏£‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á 7 ‡∏ß‡∏±‡∏ô</p>

      <label>‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏±‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</label>
      <input type="email" id="mixEmail" placeholder="example@gmail.com" />

      <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡∏•‡∏¥‡∏ï</label>
      <input type="date" id="mixDate" />

      <button class="btn" onclick="calculateMix()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å + ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</button>

      <div id="mixResult" class="result hidden"></div>

      <button class="btn back" onclick="goHome()">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
    </div>

    <!-- ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ 2 -->
    <div id="separate" class="hidden">
      <h1>‡∏ó‡∏£‡∏≤‡∏¢‡πÅ‡∏°‡∏ß‡πÅ‡∏¢‡∏Å‡∏´‡∏±‡∏ß‡πÄ‡∏ä‡∏∑‡πâ‡∏≠ EM</h1>
      <p>‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏â‡∏µ‡∏î EM ‡πÉ‡∏´‡∏°‡πà (7 ‡∏ß‡∏±‡∏ô) ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ó‡∏£‡∏≤‡∏¢ (14 ‡∏ß‡∏±‡∏ô)</p>

      <label>‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏±‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</label>
      <input type="email" id="separateEmail" placeholder="example@gmail.com" />

      <label>‡∏ß‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏â‡∏µ‡∏î‡∏´‡∏±‡∏ß‡πÄ‡∏ä‡∏∑‡πâ‡∏≠ EM</label>
      <input type="datetime-local" id="separateDate" />

      <button class="btn" onclick="calculateSeparate()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å + ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</button>

      <div id="separateResult" class="result hidden"></div>

      <button class="btn back" onclick="goHome()">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
    </div>

    <!-- ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥ -->
    <div id="historyPage" class="hidden">
      <h1>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ó‡∏£‡∏≤‡∏¢</h1>
      <div class="result">
        <table id="historyTable">
          <thead>
            <tr>
              <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
              <th>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</th>
              <th>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</th>
              <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <button class="btn back" onclick="clearHistory()">‡∏•‡πâ‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</button>
      <button class="btn back" onclick="goHome()">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
    </div>

    <!-- ‡∏Ç‡πâ‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ -->
    <div id="advicePage" class="hidden">
      <h1>‡∏Ç‡πâ‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h1>
      <div class="result">
        <p><b>‡πÅ‡∏ö‡∏ö‡∏ú‡∏™‡∏° EM:</b> ‡∏ó‡∏£‡∏≤‡∏¢‡πÅ‡∏°‡∏ß‡∏°‡∏µ‡∏≠‡∏≤‡∏¢‡∏∏‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 7 ‡∏ß‡∏±‡∏ô ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÉ‡∏´‡∏°‡πà</p>
        <p><b>‡πÅ‡∏ö‡∏ö‡πÅ‡∏¢‡∏Å‡∏´‡∏±‡∏ß‡πÄ‡∏ä‡∏∑‡πâ‡∏≠ EM:</b> ‡∏´‡∏±‡∏ß‡πÄ‡∏ä‡∏∑‡πâ‡∏≠ EM ‡∏Ñ‡∏ß‡∏£‡∏â‡∏µ‡∏î‡∏ã‡πâ‡∏≥‡∏ó‡∏∏‡∏Å 7 ‡∏ß‡∏±‡∏ô ‡πÅ‡∏•‡∏∞‡∏ó‡∏£‡∏≤‡∏¢‡πÅ‡∏°‡∏ß‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏£‡∏ö 14 ‡∏ß‡∏±‡∏ô</p>
        <p>‡∏Ñ‡∏ß‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ó‡∏£‡∏≤‡∏¢‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏ñ‡πà‡∏≤‡∏¢‡πÄ‡∏ó ‡πÅ‡∏•‡∏∞‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡πÅ‡∏™‡∏á‡πÅ‡∏î‡∏î‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á</p>
      </div>
      <button class="btn back" onclick="goHome()">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
    </div>

    <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• EM -->
    <div id="emPage" class="hidden">
      <h1>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á EM</h1>
      <img class="hero" src="em.jpg" alt="EM">
      <div class="result">
        <p><b>EM (Effective Microorganisms)</b> ‡∏Ñ‡∏∑‡∏≠ ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏à‡∏∏‡∏•‡∏¥‡∏ô‡∏ó‡∏£‡∏µ‡∏¢‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡∏´‡∏•‡∏≤‡∏¢‡∏ä‡∏ô‡∏¥‡∏î ‡∏≠‡∏¢‡∏π‡πà‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏Å‡∏±‡∏ô</p>
        <p>‡∏ä‡πà‡∏ß‡∏¢‡∏¢‡πà‡∏≠‡∏¢‡∏™‡∏•‡∏≤‡∏¢‡∏™‡∏≤‡∏£‡∏≠‡∏¥‡∏ô‡∏ó‡∏£‡∏µ‡∏¢‡πå ‡∏•‡∏î‡∏Å‡∏•‡∏¥‡πà‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏∂‡∏á‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå ‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏î‡∏∏‡∏•‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°</p>
        <hr>
        <p><b>‡πÇ‡∏Ñ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏ó‡∏£‡∏≤‡∏¢‡πÅ‡∏°‡∏ß‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞ EM</b></p>
        <p>‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏ô‡∏≥ EM ‡∏°‡∏≤‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå‡πÉ‡∏ä‡πâ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥ (‡∏à‡∏≠‡∏Å‡πÅ‡∏´‡∏ô) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏î‡∏π‡∏î‡∏ã‡∏±‡∏ö‡∏Å‡∏•‡∏¥‡πà‡∏ô‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô‡∏à‡∏≤‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏Ç‡∏≠‡∏á‡πÅ‡∏°‡∏ß</p>
        <p>‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏¥‡∏ï‡∏£‡∏ï‡πà‡∏≠‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏° ‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ</p>
      </div>
      <button class="btn back" onclick="goHome()">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
    </div>

  </div>

  <script>
    function showPage(page) {
      document.querySelectorAll('.container > div').forEach(div => {
        if (div.id !== 'home') div.classList.add('hidden');
      });
      document.getElementById('home').classList.add('hidden');
      document.getElementById(page).classList.remove('hidden');
      if (page === 'historyPage') loadHistory();
    }

    function goHome() {
      document.querySelectorAll('.container > div').forEach(div => {
        if (div.id !== 'home') div.classList.add('hidden');
      });
      document.getElementById('home').classList.remove('hidden');
    }

    function openDeploy() {
      window.open('https://pages.github.com/', '_blank');
    }

    function addDays(date, days) {
      const result = new Date(date);
      result.setDate(result.getDate() + days);
      return result;
    }

    function formatDate(date) {
      return date.toLocaleString('th-TH');
    }

    function notifyBrowser(text) {
      if (!('Notification' in window)) return;

      if (Notification.permission === 'granted') {
        new Notification('‡∏ó‡∏£‡∏≤‡∏¢‡πÅ‡∏°‡∏ß‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞ EM', { body: text });
      } else if (Notification.permission !== 'denied') {
        Notification.requestPermission().then(p => {
          if (p === 'granted') {
            new Notification('‡∏ó‡∏£‡∏≤‡∏¢‡πÅ‡∏°‡∏ß‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞ EM', { body: text });
          }
        });
      }
    }

    function loadHistory() {
      const data = JSON.parse(localStorage.getItem('catSandHistory') || '[]');
      const tableBody = document.querySelector('#historyTable tbody');
      tableBody.innerHTML = '';
      data.forEach(row => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${row.type}</td>
          <td>${row.email}</td>
          <td>${row.detail}</td>
          <td>${row.date}</td>
        `;
        tableBody.appendChild(tr);
      });
    }

    function saveHistory(type, email, detail) {
      const data = JSON.parse(localStorage.getItem('catSandHistory') || '[]');
      data.push({
        type: type,
        email: email,
        detail: detail,
        date: new Date().toLocaleString('th-TH')
      });
      localStorage.setItem('catSandHistory', JSON.stringify(data));
    }

    function clearHistory() {
      if (confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
        localStorage.removeItem('catSandHistory');
        loadHistory();
      }
    }

    function calculateMix() {
      const email = document.getElementById('mixEmail').value;
      const dateInput = document.getElementById('mixDate').value;

      if (!email || !dateInput) {
        alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö');
        return;
      }

      const baseDate = new Date(dateInput);
      const notifyDate = addDays(baseDate, 7);

      const message = `‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ó‡∏£‡∏≤‡∏¢‡πÅ‡∏°‡∏ß‡πÅ‡∏•‡πâ‡∏ß: ${formatDate(notifyDate)}`;

      notifyBrowser(message);
      sendEmail(message, email);
      saveHistory('‡∏ó‡∏£‡∏≤‡∏¢‡πÅ‡∏°‡∏ß‡∏ú‡∏™‡∏° EM', email, message);

      const resultDiv = document.getElementById('mixResult');
      resultDiv.classList.remove('hidden');
      resultDiv.innerHTML = `<p><b>‡∏ß‡∏±‡∏ô‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô:</b> ${formatDate(notifyDate)}</p>`;
    }

    function calculateSeparate() {
      const email = document.getElementById('separateEmail').value;
      const dateInput = document.getElementById('separateDate').value;

      if (!email || !dateInput) {
        alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö');
        return;
      }

      const baseDate = new Date(dateInput);
      const emDate = addDays(baseDate, 7);
      const changeDate = addDays(baseDate, 14);

      const message = `‡∏â‡∏µ‡∏î EM ‡πÉ‡∏´‡∏°‡πà: ${formatDate(emDate)} | ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ó‡∏£‡∏≤‡∏¢: ${formatDate(changeDate)}`;

      notifyBrowser(message);
      sendEmail(message, email);
      saveHistory('‡∏ó‡∏£‡∏≤‡∏¢‡πÅ‡∏°‡∏ß‡πÅ‡∏¢‡∏Å‡∏´‡∏±‡∏ß‡πÄ‡∏ä‡∏∑‡πâ‡∏≠ EM', email, message);

      const resultDiv = document.getElementById('separateResult');
      resultDiv.classList.remove('hidden');
      resultDiv.innerHTML = `
        <p><b>‡∏â‡∏µ‡∏î EM ‡πÉ‡∏´‡∏°‡πà:</b> ${formatDate(emDate)}</p>
        <p><b>‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ó‡∏£‡∏≤‡∏¢:</b> ${formatDate(changeDate)}</p>
      `;
    }
  </script>

  <!-- EmailJS -->
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <script>
    (function () {
      emailjs.init('e1fq8yHoljMDtV890');
    })();

    function sendEmail(message, email) {
      emailjs.send('service_arqhvpj', 'template_4c0qgdx', {
        message: message,
        to_email: email
      }).then(() => {
        console.log('‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏•‡πâ‡∏ß');
      });
    }
  </script>
</body>
</html>
